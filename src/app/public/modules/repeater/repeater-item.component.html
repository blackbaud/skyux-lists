<div
  class="sky-repeater-item sky-padding-even-default"
  [attr.tabindex]="tabIndex"
  [ngClass]="{
    'sky-repeater-item-active': isActive,
    'sky-repeater-item-collapsible': isCollapsible,
    'sky-repeater-item-selected': isSelected
  }"
  (click)="onRepeaterItemClick($event)"
  (focus)="onFocus()"
  (keydown.ArrowDown)="onArrowDown($event)"
  (keydown.ArrowLeft)="onArrowLeft($event)"
  (keydown.ArrowRight)="onArrowRight($event)"
  (keydown.ArrowUp)="onArrowUp($event)"
  (keydown.Enter)="onEnter($event)"
  (keydown.Space)="onSpace($event)"
  #skyRepeaterItem
>

  <ng-container *ngIf="inlineFormTemplate">
    <sky-inline-form
      [config]="inlineFormConfig"
      [showForm]="showInlineForm"
      [template]="inlineFormTemplate"
      (close)="onInlineFormClose($event)"
    >
      <ng-container *ngTemplateOutlet="skyRepeaterItemLeft"></ng-container>
      <ng-container *ngTemplateOutlet="skyRepeaterItemRight"></ng-container>
    </sky-inline-form>
  </ng-container>

  <ng-container *ngIf="!inlineFormTemplate">
    <ng-container *ngTemplateOutlet="skyRepeaterItemLeft"></ng-container>
    <ng-container *ngTemplateOutlet="skyRepeaterItemRight"></ng-container>
  </ng-container>

</div>

<ng-template
  #skyRepeaterItemLeft
>
  <div class="sky-repeater-item-left">
    <sky-checkbox
      *ngIf="selectable"
      class="sky-repeater-item-checkbox"
      [checked]="isSelected"
      [label]="'skyux_repeater_item_checkbox_label' | skyLibResources"
      (change)="updateIsSelected($event)"
    >
    </sky-checkbox>
    <div
      class="sky-repeater-item-context-menu"
      [hidden]="contextMenuEl.children.length === 0"
      (keydown)="onContextMenuKeydown($event)"
      #contextMenuEl
    >
      <ng-content select="sky-repeater-item-context-menu"></ng-content>
    </div>
  </div>
</ng-template>

<ng-template
  #skyRepeaterItemRight
>
  <div class="sky-repeater-item-right">
    <header
        class="sky-repeater-item-header"
        [hidden]="titleEl.children.length === 0"
        (click)="headerClick()"
    >
      <div class="sky-repeater-item-title sky-emphasized" #titleEl>
        <ng-content select="sky-repeater-item-title"></ng-content>
      </div>
      <div class="sky-repeater-item-chevron" *ngIf="isCollapsible">
        <sky-chevron
          [attr.aria-controls]="contentId"
          [attr.aria-expanded]="isExpanded"
          [direction]="isExpanded ? 'up' : 'down'"
          (directionChange)="chevronDirectionChange($event)"
        >
        </sky-chevron>
      </div>
    </header>
    <div
      class="sky-repeater-item-content"
      [id]="contentId"
      [@skyAnimationSlide]="slideDirection">
      <ng-content select="sky-repeater-item-content"></ng-content>
    </div>
  </div>
</ng-template>
